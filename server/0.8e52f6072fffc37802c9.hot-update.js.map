{"version":3,"sources":["webpack:///./src/server.js?d054"],"names":["Html","Route","app","hostname","port","getMarkup","store","render_props","metadata","component","getState","use","static","connect","err","res","console","log","urlencoded","extended","json","get","req","location","url","routes","error","redirection_location","status","send","message","redirect","redirectLocation","pathname","search","rooter","Router","route","findAllUsers","post","addUser","put","updateUser","delete","deleteUser","ensureAuthenticated","findAllClients","addClient","findByName","updateClient","deleteClient","validateClient","listen","info","module","hot","accept","require","default"],"mappings":"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","file":"0.8e52f6072fffc37802c9.hot-update.js","sourcesContent":["import express from 'express';\nimport React from 'react';\nimport mongoose from 'mongoose';\nimport methodOverride from 'method-override';\nimport bodyParser from 'body-parser';\nimport './models/client';\nimport ClientCtrl from './controllers/client';\nimport './models/user';\nimport UserCtrl from './controllers/user';\nimport { match, RoutingContext } from 'react-router';\nimport { Provider } from 'react-redux';\nimport { renderToString } from 'react-dom/server';\nimport configureStore from './store/configure-store';\nimport HtmlContainer from './layout/html';\nimport RouteContainer from './route';\nimport { Meta } from './config/metadata';\nimport middleware from './middleware';\n\nlet Html = HtmlContainer;\nlet Route = RouteContainer;\n\nconst app      = express();\nconst hostname = 'localhost';\nconst port     = 3007;\n\nfunction getMarkup(store, render_props, metadata) {\n  const component = (\n    <Provider store={store} key=\"provider\">\n      <RoutingContext {...render_props} />\n    </Provider>\n  );\n\n  return '<!doctype html>\\n' + renderToString(\n    <Html\n      metadata  = {metadata}\n      component = {component}\n      script    = {`http://localhost:3006/client/index.js`}\n      state     = {store.getState()}\n\n    />\n  );\n}\n\napp.use('/client', express.static('client'));\napp.use('/static', express.static('public'));\n\n\n\n// Connection to DB\n\nmongoose.connect('mongodb://localhost/', function (err, res) {\n  if (err) {\n    throw err;\n  };\n  console.log('Connected to Database');\n});\n\n// Middlewares\n\napp.use(bodyParser.urlencoded({ extended: false }));\napp.use(bodyParser.json());\napp.use(methodOverride());\n\n\n// WEB\napp.get('/', function (req, res) {\n  match({\n    location: req.url,\n    routes: Route\n  }, function (error, redirection_location, render_props) {\n    if (error) {\n      console.error('Router error:', error);\n\n      res.status(500).send(error.message);\n    } else if (redirection_location) {\n      res.redirect(302, redirectLocation.pathname + redirection_location.search);\n    } else if (render_props) {\n\n      const store = configureStore({});\n\n      res.status(200).send(getMarkup(store, render_props, Meta[req.url] ));\n    } else {\n      res.status(400).send('Not Found');\n    }\n  });\n});\n\n// API routes\nvar rooter = express.Router();\n\nrooter.route('/user')\n  .get(UserCtrl.findAllUsers)\n  .post(UserCtrl.addUser);\n\n\nrooter.route('/user/:id')\n  .put(UserCtrl.updateUser)\n  .delete(UserCtrl.deleteUser);\n\nrooter.route('/client')\n  .get(middleware.ensureAuthenticated, ClientCtrl.findAllClients)\n  .post(ClientCtrl.addClient);\n\nrooter.route('/client/:id')\n  .get(ClientCtrl.findByName)\n  .put(ClientCtrl.updateClient)\n  .delete(ClientCtrl.deleteClient);\n\nrooter.route('/client/:id/validate')\n  .post(ClientCtrl.validateClient);\n\napp.use('/api', rooter);\n\n\n// Create Server \n\napp.listen(port, function (error) {\n  if (error) {\n    console.error(error);\n  } else {\n    console.info(`==> ðŸŒŽ  Open up https://${hostname}:${port}/ in your browser.`);\n  }\n});\n\n\nif (module.hot) {\n  console.info('[HMR] Server is listeningâ€¦');\n\n  module.hot.accept('./layout/html', function () {\n    console.info('[HMR] Patching Html');\n\n    Html = require('./layout/html').default;\n  });\n\n  module.hot.accept('./route', function () {\n    console.info('[HMR] Patching Route');\n\n    Route = require('./route').default;\n  });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/server.js\n **/"],"sourceRoot":""}